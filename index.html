<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>VR Tour | Đại học Công nghiệp TP. Hồ Chí Minh</title>
  <meta name="description" content="Test AR">
  <meta name="author" content="Industrial University of Ho Chi Minh city">
  <!-- <meta name="author" content="IUH x @Kennex666 x @EchhOpp"> -->
  <!-- <meta http-equiv="Cache-Control" content="max-age=604800"> -->

  <script src="https://cdn.tailwindcss.com/"></script>
  <link rel="stylesheet" href="./static_assets/css/style_main.css">
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.0/css/all.min.css">
  
  <!-- <script src="https://aframe.io/releases/1.7.0/aframe.min.js"></script> -->
  <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script> 

  <script src="https://unpkg.com/aframe-particle-system-component@1.1.0/dist/aframe-particle-system-component.min.js"></script>
  <script src="https://unpkg.com/aframe-animation-component@^5.0.0/dist/aframe-animation-component.min.js"></script>
  <script src="https://unpkg.com/aframe-look-at-component@1.0.0/dist/aframe-look-at-component.min.js"></script>

  <script src="./static_assets/js/script.js"></script>
  <script src="./static_assets/js/js-canvas-textpreview.js"></script>
  <script src="./app_info.js"></script>
  <script src="./static_assets/js/a-frame-controller.js"></script>
  <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
  <script src="/static_assets/js/modify-client.js"></script>
  <script src="/static_assets/js/axis-helper.js"></script>


  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/intro.js/minified/introjs.min.css">
  <script src="https://cdn.jsdelivr.net/npm/intro.js/minified/intro.min.js"></script>

  <!-- favico -->
  <link rel="icon" href="./favicon.ico" type="image/x-icon">
  <link rel="shortcut icon" href="./favicon.ico" type="image/x-icon">
  <link rel="apple-touch-icon" sizes="180x180" href="./favicon.ico">
  <link rel="icon" type="image/png" sizes="32x32" href="./favicon.ico">

  <!-- PWA Meta for cross-platform support -->
  <link rel="manifest" href="./manifest.json">
  <meta name="theme-color" content="#ffffff">

  <!-- iOS -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="VR Tour IUH">
  <link rel="apple-touch-icon" href="./static_assets/logo/iuh-app.jpg">
  <link rel="apple-touch-startup-image" href="./static_assets/logo/iuh-app.jpg">

  <!-- Windows -->
  <meta name="application-name" content="VR Tour IUH">
  <meta name="msapplication-TileImage" content="./static_assets/logo/iuh-app.jpg">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-navbutton-color" content="#ffffff">
  <meta name="msapplication-tooltip" content="VR Tour IUH">
  <meta name="msapplication-starturl" content="./index.html">
  <meta name="msapplication-tap-highlight" content="no">

</head>
 <body class="relative">
  <!-- Info target -->
    <div id="target-info" class="hidden absolute z-[30] bg-[--color-primary] py-2 px-4 text-white text-center gap-2 flex flex-col opacity-90" style="pointer-events: none;">
      <img src="" class="w-32 h-20 md:w-64 md:h-36 object-cover">
      <p class="uppercase font-bold text-xs md:text-sm"></p>
    </div>
      
    <a-scene real-world-meshing background="color: #ECECEC" id="scene360">
      <div id="assetsManagerLazy"></div>
      <a-assets id="assetsManager">
        <img id="hotspot" src="./static_assets/img/go.png"/>

        <!-- Point facility 1 -->
        <img id="Cs1-Sky-1224" src="./static_assets/img/360/Cs1-Sky-1224.jpg"/>
         
        <!-- Template cho markpoint -->
        <script id="markpoint-template" type="text/html">
            <a-entity class="markpoint-group" visible="false" look-at="#cam">
                <a-plane class="markpoint-bg" width="2" height="1.28" color="#262261" opacity="0.8"></a-plane>
                <a-image class="markpoint-preview" width="0.6" height="0.16"></a-image>
                <a-image class="markpoint-img" width="1.8" height="1"></a-image>
            </a-entity>
            <a-ring class="markpoint-ring" look-at="#cam" radius-inner="0.06" radius-outer="0.08" color="blue" 
                    animation__scale="property: scale; from: 1 1 1; to: 2 2 2; dur: 1200; easing: linear; loop: true"
                    animation__opacity="property: opacity; from: 0.9; to: 0; dur: 1200; easing: linear; loop: true"></a-ring>
            <a-plane class="hover-area" width="1" height="1" color="transparent" opacity="0" position="0 -0.8 0.02" look-at="#cam"></a-plane>
        </script>

        <!-- template for highlight -->
         <script id="highlight-template" type="text/html">
            <a-box 
              class="highlight-box"
              width="1.2" height="1.2" depth="1.2"
              color="#ff0000"
              opacity="0.5"
              animation__fade="property: material.opacity; from: 0; to: 0.5; dur: 300; startEvents: showHighlight"
              animation__fadeout="property: material.opacity; from: 0.5; to: 0; dur: 200; startEvents: hideHighlight">
            </a-box>
         </script>
      </a-assets>


      <a-entity id="spots" hotspots>
      </a-entity>
      
      <!-- This is main scene -->
      <a-sky location-sky id="skybox" 
              src="#Cs1-Sky-1224"
              position="0 0 0"
              rotation="0 0 0"
      ></a-sky>

      <!-- Camera - Crosshair: Purpose - use for zoom in & zoom out / movement -->
      <a-entity
        id="cam"
        raycaster="objects: .clickable"
        cursor="rayOrigin: mouse; fuse: false"
        camera="zoom: 1"
        position="0 0 0"
        rotation="0 90 0"
        custom-look
        look-controls="enabled: true; reverseMouseDrag: true;"
      ></a-entity>

      <a-entity position="0 1.25 -3"  rotation="0 0 0" id="test" axis-helper>
        <a-plane class="clickable" position="0 0 0" color="transparent" opacity="0" width="1" height="1" look-at="#cam" axis-selector>
          <a-ring radius-inner="0.02" radius-outer="0.07" color="#fff" look-at="#cam"
            animation__scale="property: scale; from: 0 0 0; to: 3 3 3; dur: 1500; easing: easeOutQuad; loop: true"
            animation__opacity="property: opacity; from: 1; to: 0; dur: 1500; easing: easeOutQuad; loop: true">
          </a-ring>
  
          <a-ring radius-inner="0.00" radius-outer="0.05" color="#FF6B6B" look-at="#cam"
            animation__scale="property: scale; from: 0 0 0; to: 3 3 3; dur: 1500; easing: easeInOutSine; loop: true"
            animation__opacity="property: opacity; from: 1; to: 0; dur: 1500; easing: easeInOutSine; loop: true">
          </a-ring>
  
          <a-ring radius-inner="0.07" radius-outer="0.09" color="#262261" look-at="#cam"
            animation__scale="property: scale; from: 0 0 0; to: 3 3 3; dur: 1500; easing: easeInOutSine; loop: true"
            animation__opacity="property: opacity; from: 1; to: 0; dur: 1500; easing: easeInOutSine; loop: true">
          </a-ring>
        </a-plane>
      </a-entity>


    </a-scene>
  </body>
  
  <div class="currentLocation px-2 y-1">
    <p class="text-white">Bạn đang ở <span class="" id="currentLocation">Loading</span></p>
  </div>

  

    <!-- Create a popup menu for additional options -->
    <div class="fixed bottom-16 right-4 bg-[--color-primary] text-white p-4 rounded-lg shadow-lg z-40 hidden" id="popup-custom-value">
      <div class="popup-content">
        <h3 class="uppercase text-center font-bold">Thông số tuỳ chỉnh</h3>
        <!-- Create x,y,z input (postion) and rotation xyz (divided 2 tabs) -->
        <div class="grid grid-cols-2 mt-4 gap-2">
          <button class="px-2 py-1 border-white border text-white rounded hover:bg-white/30 bg-white/30" data-tab="position">Vị trí</button>
          <button class="px-2 py-1 border-white border text-white rounded hover:bg-white/30" data-tab="rotation">Xoay</button>
        </div>
        <div class="tab-content mt-4">
          <div class="flex flex-col gap-1" tab="position">
            <div><label class="mr-2" for="posX">X:</label>
            <input type="number" data-input="posX" class="text-black" step="0.1"></div>
            <div><label class="mr-2" for="posY">Y:</label>
            <input type="number" data-input="posY" class="text-black" step="0.1"></div>
            <div><label class="mr-2" for="posZ">Z:</label>
            <input type="number" data-input="posZ" class="text-black" step="0.1"></div>
          </div>
          <div class="flex flex-col gap-1 hidden" tab="rotation">
            <div><label class="mr-2" for="rotX">X:</label>
            <input type="number" data-input="rotX" class="text-black" step="1"></div>
            <div><label class="mr-2" for="rotY">Y:</label>
            <input type="number" data-input="rotY" class="text-black" step="1"></div>
            <div><label class="mr-2" for="rotZ">Z:</label>
            <input type="number" data-input="rotZ" class="text-black" step="1"></div>
          </div>
        </div>

        <div class="grid-cols-3 grid gap-2">
          <button data-tab="save" class="bg-[--color-primary-light] text-white px-4 py-2 rounded mt-4 hover:bg-[--color-primary-light] hover:opacity-90 col-span-2">Lưu thay đổi</button>
          <button data-tab="close" class="bg-[--color-primary-light] text-white px-4 py-2 rounded mt-4 hover:bg-[--color-primary-light] hover:opacity-90">Đóng</button>
        </div>
      </div>
    </div>

  <div class="menu-bottom flex flex-row items-center justify-between px-4 py-1 md:px-6 md:py-2 bg-[--color-primary] opacity-80 text-xs md:text" id="menu-bottom">
    <!-- group button 1 -->
    <div class="flex flex-row items-center gap-3">
      <!-- <button class="w-6 h-6 md:w-8 md:h-8 border-2 border-white rounded-full text-[--color-quaternary] hover:border-[--color-secondary-light] hover:[--color-tertiary-light]" data-controller="backFunction" onclick="controllMenu(this)" title="Quay lại điểm trước">
        <i class="fa-solid fa-angles-left"></i>
      </button> -->
      <!-- <button class="w-6 h-6 md:w-8 md:h-8 border-2 border-white rounded-full text-[--color-quaternary] hover:border-[--color-secondary-light] hover:[--color-tertiary-light]" data-controller="closeAllMenu" onclick="controllMenu(this)" title="Đóng các Menu">
        <i class="fa-solid fa-x"></i>
      </button> -->
      <button data-intro="Mở menu truy cập nhanh các địa điểm" data-step="1" class="w-6 h-6 md:w-8 md:h-8 border-2 border-white rounded-full text-[--color-quaternary] hover:border-[--color-secondary-light] hover:[--color-tertiary-light]" data-controller="openMenuLeft" onclick="controllMenu(this)" title="Mở bảng điều hướng">
        <i class="fa-solid fa-bars"></i>
      </button>
    </div>

    <!-- group button 2 -->
    <div class="flex flex-row items-center gap-3">
      <button class="w-6 h-6 md:w-8 md:h-8 border-2 border-white rounded-full text-[--color-quaternary] hover:border-[--color-secondary-light] hover:[--color-tertiary-light]" data-controller-attribute="" data-controller="setFavorite" onclick="controllMenu(this)" title="Đặt làm vị trí mặc định">
        <i class="fa-solid fa-star"></i>
      </button>
      <button class="w-6 h-6 md:w-8 md:h-8 border-2 border-white rounded-full text-[--color-quaternary] hover:border-[--color-secondary-light] hover:[--color-tertiary-light]" data-controller-attribute="generalinfo-dialog" data-controller="toggleCustomValuePopup" onclick="controllMenu(this)" title="Thông số tuỳ chỉnh">
        <i class="fa-solid fa-pencil"></i>
      </button>
    </div>

    <!-- group button 3 -->
    <div class="flex flex-row items-center gap-3">
      <button data-intro="Bật/tắt toàn màn hình" data-step="10" class="w-6 h-6 md:w-8 md:h-8 border-2 border-white rounded-full text-[--color-quaternary] hover:border-[--color-secondary-light] hover:[--color-tertiary-light]" data-controller="fullScreen" onclick="controllMenu(this)" title="Full màn hình">
        <i class="fa-solid fa-expand"></i>
      </button>
      <!-- <button class="w-6 h-6 md:w-8 md:h-8 border-2 border-white rounded-full text-[--color-quaternary] hover:border-[--color-secondary-light] hover:[--color-tertiary-light]" data-controller="goAhead" onclick="controllMenu(this)" title="Đi đến điểm kế tiếp">
        <i class="fa-solid fa-angles-right"></i>
      </button> -->
    </div>
  </div>
</html>