<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tự Động Tạo Canvas</title>
</head>
<body>
    <h1>Tạo Canvas Tự Động Với Chữ</h1>
    <input type="text" id="textInput" placeholder="Nhập nội dung" value="Chào mừng bạn!">
    <button id="generateBtn">Tạo Canvas</button>
    <br><br>
    <script>
        const canvas = document.createElement('canvas');
        const ctx = canvas.getContext('2d');

        document.getElementById('generateBtn').addEventListener('click', () => {
            const text = document.getElementById('textInput').value;
            createImageCanvasWithFont({text: text, fontSize: 100, color: "#fff"});
        });


        function createImageCanvasWithFont({
            text = "Default",
            fontSize = 500,
            color = "#000"
        }) {
            const padding = 20; // Khoảng cách xung quanh chữ

            // Đặt font chữ để tính toán kích thước
            ctx.font = `${fontSize}px Arial`;

            // Tính toán kích thước canvas dựa trên nội dung
            const textWidth = ctx.measureText(text).width;
            const textHeight = fontSize; // Chiều cao font gần bằng kích thước font

            // Cập nhật kích thước canvas
            canvas.width = textWidth + padding * 2;
            canvas.height = textHeight + padding * 2;

            // Vẽ chữ
            ctx.fillStyle = color; // Màu chữ đen
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.font = `${fontSize}px Arial`;
            ctx.fillText(text, canvas.width / 2, canvas.height / 2);
            // generate image for image src
            const img = new Image();
            img.src = canvas.toDataURL();
            
            document.body.appendChild(img);
            // download image            
            return canvas.toDataURL();
        }
    </script>
</body>
</html>
